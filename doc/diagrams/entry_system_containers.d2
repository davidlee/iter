direction: down

title: {
  label: Entry Collection System - Container Level
  near: top-center
  style.font-size: 20
  style.bold: true
}

entry_collector: {
  label: |md
    **EntryCollector**
    
    [Container: Go Module]
    
    Main orchestrator that coordinates habit loading, entry collection, and persistence
  |
  style.fill: "#1168bd"
  style.font-color: white
}

field_input_factory: {
  label: |md
    **FieldInputFactory**
    
    [Container: Go Module]
    
    Creates field-type-specific input components using bubbletea + huh patterns
  |
  style.fill: "#1168bd"
  style.font-color: white
}

habit_entry_handlers: {
  label: |md
    **Habit Entry Handlers**
    
    [Container: Go Module]
    
    Handles habit-type-specific collection for Simple, Elastic, Informational, Checklist habits
  |
  style.fill: "#1168bd"
  style.font-color: white
}

scoring_integration: {
  label: |md
    **Scoring Integration**
    
    [Container: Go Module]
    
    Provides immediate feedback with real-time achievement calculation
  |
  style.fill: "#1168bd"
  style.font-color: white
}

habit_schema: {
  label: |md
    **Habit Schema**
    
    [External Data Store: YAML]
    
    Habit definitions with field types and criteria from T009
  |
  shape: cylinder
  style.fill: "#999999"
  style.font-color: white
}

entry_storage: {
  label: |md
    **Entry Storage**
    
    [External Data Store: YAML]
    
    Daily entry persistence with versioned data
  |
  shape: cylinder
  style.fill: "#999999"
  style.font-color: white
}

scoring_engine: {
  label: |md
    **Scoring Engine**
    
    [External System]
    
    Achievement evaluation against habit criteria
  |
  style.fill: "#999999"
  style.font-color: white
}

bubbletea_huh: {
  label: |md
    **Bubbletea + Huh**
    
    [External System]
    
    Interactive CLI framework for forms and user interface
  |
  style.fill: "#999999"
  style.font-color: white
}

entry_collector -> field_input_factory: |md
  Creates input widgets
  
  [Function calls]
|

entry_collector -> habit_entry_handlers: |md
  Delegates habit-specific collection
  
  [Function calls]
|

habit_entry_handlers -> scoring_integration: |md
  Requests immediate scoring
  
  [Function calls]
|

scoring_integration -> scoring_engine: |md
  Evaluates criteria
  
  [Function calls]
|

entry_collector -> habit_schema: |md
  Loads habit definitions
  
  [File I/O]
|

entry_collector -> entry_storage: |md
  Persists collected entries
  
  [File I/O]
|

field_input_factory -> bubbletea_huh: |md
  Creates interactive forms
  
  [Library calls]
|

habit_entry_handlers -> bubbletea_huh: |md
  Displays achievement feedback
  
  [Library calls]
|